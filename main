org 100h

CALL VIDEO 
CALL CABECERA       ;IMPRIME EN PANTALLA EL ENCABEZADO
CALL MENU           ;IMPRIME EL MENU PRINCIPAL ACCEDIDO POR TECLADO 
CALL DECORACION     ;BORDES DECORATIVOS   
CALL PEDIR_OPCION   ;OPCION DEL MENU A TRAVEZ DE TECLADO
CALL SALIR

ret

PEDIR_OPCION:
CALL TECLADO
CMP AL,"1"
JE OP1 
CMP AL,"2"
JE OP2
CMP AL,"3"
JE OP3
CMP AL,1BH ;TECLA ESC
JE SALIR_PO 

OP1: CALL OPCION1
JMP SALIR_PO

OP2: CALL OPCION2
JMP SALIR_PO
                        
OP3: CALL OPCION3

SALIR_PO:
RET 

BORRAR_PANTALLA:
MOV AH,06H    ;DESPLAZANDO LA PANTALLA HACIA ARRIBA
MOV AL,00H    ;BORRA TODA LA PANTALLA
MOV BH,00H    ;CON FONDO NEGRO
MOV CX,0000H  ;COORDENADAS INICIALES
MOV DH,24D    ;COORDENADAS FINALES (FILA)
MOV DL,79D    ;COORDENADAS FINALES (COLUMNA)
INT 10H  
RET            


OPCION3:
CALL BORRAR_PANTALLA
CALL CREDITOS
CALL DECORACION 
CALL SALIR_AUX ;FUNCION PROVISIONAL PARA VER RESULTADOS Y SALIR
RET


;------------- SUBRUTINAS DE OPCION 1 -----------------------
OPCION1:
CALL BORRAR_PANTALLA
CALL C_OPUESTO 
CALL HIPOTENUSA
CALL C_ADYACENTE 
CALL DECORACION 
CALL TRIANGULO 
CALL OPCIONES_RAZONES 
CALL INICIAR_MOUSE
CALL VERIFICAR_MOUSE_OP1
RET
    
TRIANGULO:
MOV DX,50D 
MOV DI,127D
ITERAR_TRI:
        MOV CX,125D
        CALL HORIZONTAL 
        INC DX
        INC DI
        CMP DX,300D
        JNE ITERAR_TRI
RET

C_OPUESTO:   
MOV DH,10D
MOV DL,05D
CALL POSICION
MOV DX, OFFSET TXT_C_OPUESTO
CALL IMPRIMIR    
RET

HIPOTENUSA:
MOV DH,10D
MOV DL,35D
CALL POSICION
MOV DX, OFFSET TXT_HIPOTENUSA
CALL IMPRIMIR
RET

C_ADYACENTE:
MOV DH,20D
MOV DL,23D
CALL POSICION
MOV DX, OFFSET TXT_C_ADYACENTE
CALL IMPRIMIR
RET

POSICION:
MOV AH,02H
MOV BH,00H
INT 10H
RET 

OPCIONES_RAZONES:
CALL BORDE_SENO
CALL BORDE_COSECANTE
CALL BORDE_COSENO
CALL BORDE_SECANTE
CALL BORDE_TANGENTE 
CALL BORDE_COTANGENTE 
CALL BTN_SALIR
RET

BORDE_SENO:
MOV DX,25D      ;INICIO DE PINTAR CUADRO
MOV CX,475D
MOV DI,600D
CALL HORIZONTAL
MOV DI,50D
CALL VERTICAL
MOV DX,25D
MOV CX,475D 
MOV DI,50D
CALL VERTICAL
MOV DI,600D
CALL HORIZONTAL ;FIN DE PINTAR CUADRO              
MOV DH,02D      ;POSICION DEL TEXTO DENTRO DEL CUADRO
MOV DL,61D
CALL POSICION
MOV DX, OFFSET TXT_SENO 
CALL IMPRIMIR              
RET  

BORDE_COSENO:
MOV DX,55D      ;INICIO DE PINTAR CUADRO
MOV CX,475D
MOV DI,600D
CALL HORIZONTAL
MOV DI,80D
CALL VERTICAL
MOV DX,55D
MOV CX,475D 
MOV DI,80D
CALL VERTICAL
MOV DI,600D
CALL HORIZONTAL ;FIN DE PINTAR CUADRO              
MOV DH,04D      ;POSICION DEL TEXTO DENTRO DEL CUADRO
MOV DL,61D
CALL POSICION
MOV DX, OFFSET TXT_COSENO 
CALL IMPRIMIR              
RET 

BORDE_TANGENTE:
MOV DX,90D      ;INICIO DE PINTAR CUADRO
MOV CX,475D
MOV DI,600D
CALL HORIZONTAL
MOV DI,115D
CALL VERTICAL
MOV DX,90D
MOV CX,475D 
MOV DI,115D
CALL VERTICAL
MOV DI,600D
CALL HORIZONTAL ;FIN DE PINTAR CUADRO              
MOV DH,06D      ;POSICION DEL TEXTO DENTRO DEL CUADRO
MOV DL,61D
CALL POSICION
MOV DX, OFFSET TXT_TANGENTE 
CALL IMPRIMIR              
RET

BORDE_COSECANTE:
MOV DX,120D      ;INICIO DE PINTAR CUADRO
MOV CX,475D
MOV DI,600D
CALL HORIZONTAL
MOV DI,145D
CALL VERTICAL
MOV DX,120D
MOV CX,475D 
MOV DI,145D
CALL VERTICAL
MOV DI,600D
CALL HORIZONTAL ;FIN DE PINTAR CUADRO              
MOV DH,08D      ;POSICION DEL TEXTO DENTRO DEL CUADRO
MOV DL,61D
CALL POSICION
MOV DX, OFFSET TXT_COSECANTE 
CALL IMPRIMIR              
RET 

BORDE_SECANTE:
MOV DX,155D      ;INICIO DE PINTAR CUADRO
MOV CX,475D
MOV DI,600D
CALL HORIZONTAL
MOV DI,180D
CALL VERTICAL
MOV DX,155D
MOV CX,475D 
MOV DI,180D
CALL VERTICAL
MOV DI,600D
CALL HORIZONTAL ;FIN DE PINTAR CUADRO              
MOV DH,10D      ;POSICION DEL TEXTO DENTRO DEL CUADRO
MOV DL,61D
CALL POSICION
MOV DX, OFFSET TXT_SECANTE 
CALL IMPRIMIR              
RET 

BORDE_COTANGENTE:
MOV DX,185D      ;INICIO DE PINTAR CUADRO
MOV CX,475D
MOV DI,600D
CALL HORIZONTAL
MOV DI,210D
CALL VERTICAL
MOV DX,185D
MOV CX,475D 
MOV DI,210D
CALL VERTICAL
MOV DI,600D
CALL HORIZONTAL ;FIN DE PINTAR CUADRO              
MOV DH,12D      ;POSICION DEL TEXTO DENTRO DEL CUADRO
MOV DL,61D
CALL POSICION
MOV DX, OFFSET TXT_COTANGENTE 
CALL IMPRIMIR              
RET


BTN_SALIR:
MOV DX,440D      ;INICIO DE PINTAR CUADRO
MOV CX,500D
MOV DI,610D
CALL HORIZONTAL
MOV DI,465D
CALL VERTICAL
MOV DX,440D
MOV CX,500D 
MOV DI,465D
CALL VERTICAL
MOV DI,610D
CALL HORIZONTAL ;FIN DE PINTAR CUADRO              
MOV DH,28D      ;POSICION DEL TEXTO DENTRO DEL CUADRO
MOV DL,63D
CALL POSICION
MOV DX, OFFSET TXT_SALIR2 
CALL IMPRIMIR 
RET   

VERIFICAR_MOUSE_OP1:
MOV AX,03H
INT 33H
CMP BX, 01H             ;VERIFICO SI ESTA PULSADO EL BOTON
JNE VERIFICAR_MOUSE_OP1 ;SI NO ESTA PULSADO SIGO VERFICANDO PULSACION

CMP DX,440D             ;INICIO BOTON DE SALIR
JB AVANZAR1
CMP DX,465D
JA AVANZAR1
CMP CX,500D
JB AVANZAR1
CMP CX,610D
JA AVANZAR1             ;FIN DEL BOTON SALIR
JNA SALIR_OP1

AVANZAR1:       ;INICIO DEL BOTON SENO
CMP DX,25D             
JB AVANZAR2
CMP DX,50D
JA AVANZAR2
CMP CX,475D
JB AVANZAR2
CMP CX,600D
JA AVANZAR2
CALL SALIR  ;FIN DEL BOTON SENO

AVANZAR2:       ;INICIO DEL BOTON COSENO
CMP DX,55D             
JB AVANZAR3
CMP DX,80D
JA AVANZAR3
CMP CX,475D
JB AVANZAR3
CMP CX,600D
JA AVANZAR3
CALL SALIR  ;FIN DEL BOTON COSENO

AVANZAR3:       ;INICIO DEL BOTON TANGENTE
CMP DX,90D             
JB AVANZAR4
CMP DX,115D
JA AVANZAR4
CMP CX,475D
JB AVANZAR4
CMP CX,600D
JA AVANZAR4
CALL SALIR  ;FIN DEL BOTON TANGENTE

AVANZAR4:       ;INICIO DEL BOTON COSECANTE
CMP DX,120D             
JB AVANZAR5
CMP DX,145D
JA AVANZAR5
CMP CX,475D
JB AVANZAR5
CMP CX,600D
JA AVANZAR5
CALL SALIR  ;FIN DEL BOTON COSECANTE

AVANZAR5:       ;INICIO DEL BOTON SECANTE
CMP DX,155D             
JB AVANZAR6
CMP DX,180D
JA AVANZAR6
CMP CX,475D
JB AVANZAR6
CMP CX,600D
JA AVANZAR6
CALL SALIR  ;FIN DEL BOTON SECANTE

AVANZAR6:       ;INICIO DEL BOTON COTANGENTE
CMP DX,185D             
JB VERIFICAR_MOUSE_OP1
CMP DX,210D
JA VERIFICAR_MOUSE_OP1
CMP CX,475D
JB VERIFICAR_MOUSE_OP1
CMP CX,600D
JA VERIFICAR_MOUSE_OP1
CALL SALIR  ;FIN DEL BOTON COTANGENTE

SALIR_OP1:
RET

;------------------------------------------------------------

;---------SUBRUTINAS OPCION 2--------------------------------


OPCION2:
CALL BORRAR_PANTALLA
CALL DECORACION 
CALL TRIANGULO2
CALL C_OPUESTO2
CALL HIPOTENUSA2
CALL C_ADYACENTE2
CALL EJERCICIO1_ENUNCIADO
CALL BOTONES_OP2

CALL INCORRECTO
CALL INICIAR_MOUSE

CALL EJERCICIO1

;CALL EJERCICIO2
;CALL EJERCICIO3

CALL SALIR_AUX 
RET 


EJERCICIO1_ENUNCIADO:

MOV DH,2D
MOV DL,5D
CALL POSICION
MOV DX, OFFSET TXT_EJE1_TITULO
CALL IMPRIMIR

MOV DH,2D
MOV DL,21D   
CALL POSICION
MOV DX, OFFSET TXT_EJE1_PROB_P1
CALL IMPRIMIR
                  
MOV DH,3D
MOV DL,5D
CALL POSICION
MOV DX, OFFSET TXT_EJE1_PROB_P2
CALL IMPRIMIR  

MOV DX, OFFSET TXT_COSENO
INC DL
CALL IMPRIMIR 

MOV DH,8D
MOV DL,10D
CALL POSICION
MOV DX, OFFSET TXT_COSENO
CALL IMPRIMIR  

MOV DH,8D
MOV DL,19D
CALL POSICION
MOV AL,'='
MOV BL,07H
CALL IMPRIMIR_C

RET

CORRECTO:

MOV DH,18D
MOV DL,55D
CALL POSICION
MOV BL,02H
MOV AL,'C'
CALL IMPRIMIR_C
MOV AL,'O'
CALL IMPRIMIR_C

MOV AL,'R'
CALL IMPRIMIR_C

MOV AL,'R'
CALL IMPRIMIR_C

MOV AL,'E'
CALL IMPRIMIR_C

MOV AL,'C'
CALL IMPRIMIR_C

MOV AL,'T'
CALL IMPRIMIR_C

MOV AL,'O'
CALL IMPRIMIR_C



RET

INCORRECTO:

MOV DH,18D
MOV DL,55D
CALL POSICION
MOV BL,0CH  
MOV AL,'I'
CALL IMPRIMIR_C

MOV AL,'N'
CALL IMPRIMIR_C

MOV AL,'C'
CALL IMPRIMIR_C
MOV AL,'O'
CALL IMPRIMIR_C

MOV AL,'R'
CALL IMPRIMIR_C

MOV AL,'R'
CALL IMPRIMIR_C

MOV AL,'E'
CALL IMPRIMIR_C

MOV AL,'C'
CALL IMPRIMIR_C

MOV AL,'T'
CALL IMPRIMIR_C

MOV AL,'O'
CALL IMPRIMIR_C

RET 

BOTONES_OP2:

MOV DX,340D      ;INICIO DE PINTAR CUADRO
MOV CX,20D
MOV DI,50D
CALL HORIZONTAL
MOV DI,360D
CALL VERTICAL
MOV DX,340D
MOV CX,20D 
MOV DI,360D
CALL VERTICAL
MOV DI,50D
CALL HORIZONTAL

RET

VER_MOUSE:
MOV AX,03H
INT 33H
CMP BX, 01H             
JNE VER_MOUSE

;VERIFICAR SI DIO CLICK EN UNO DE LOS LADOS

CMP CX,20D  ;CATETO OPUESTO
JNA SIG1
CMP CX,50D
JNB SIG1
CMP DX,340D
JNA SIG1
CMP DX,360D
JNB SIG1
CALL CORRECTO 


SIG1:

RET


EJERCICIO1:

CALL VER_MOUSE


RET


TRIANGULO2:
MOV DX,270D   ;INICIO VERTICE SUPERIOR
MOV DI,127D
ITERAR_TRI2:
        MOV CX,125D
        CALL HORIZONTAL 
        INC DX
        INC DI
        CMP DX,400D        ;FIN DE LA BASE
        JNE ITERAR_TRI2
RET
   
   
C_OPUESTO2:   
MOV DH,19D
MOV DL,05D
CALL POSICION
MOV DX, OFFSET TXT_C_OPUESTO
CALL IMPRIMIR    
RET


HIPOTENUSA2:
MOV DH,19D
MOV DL,26D
CALL POSICION
MOV DX, OFFSET TXT_HIPOTENUSA
CALL IMPRIMIR
RET

C_ADYACENTE2:
MOV DH,26D
MOV DL,17D
CALL POSICION
MOV DX, OFFSET TXT_C_ADYACENTE
CALL IMPRIMIR
RET

;------------------------------------------------------------


CREDITOS:
MOV AH,02H
MOV BH,00H
MOV DX,00H
INT 10H
MOV DX, OFFSET TXT_CREDITOS
CALL IMPRIMIR
RET

DECORACION: 
CALL BORDE_IZQ ;DECORACION
CALL BORDE_SUP ;DECORACION
CALL BORDE_INF ;DECORACION
CALL BORDE_DER ;DECORACION
RET


BORDE_IZQ:
MOV CX,10D
MOV DI,12D ;BANDERA DE COLUMNA
MOV DX,05D
ITERAR1_IZQ:CALL HORIZONTAL ;ESTE LAZO DIBUJA 1ST LINEA
        MOV CX,10D
        INC DX 
        CMP DX,420D
        JNE ITERAR1_IZQ
MOV CX,14D
MOV DI,16D
MOV DX,05D
ITERAR2_IZQ:CALL HORIZONTAL ;ESTE LAZO DIBUJA 2ND LINEA
        MOV CX,14D
        INC DX
        CMP DX,320D
        JNE ITERAR2_IZQ 
MOV CX,18D
MOV DI,20D                                                                  
MOV DX,05D
ITERAR3_IZQ:CALL HORIZONTAL ;ESTE LAZO DIBUJA 2ND LINEA
        MOV CX,18D
        INC DX
        CMP DX,220D
        JNE ITERAR3_IZQ
RET 


BORDE_SUP:
MOV CX,05D
MOV DI,425D ;BANDERA DE COLUMNA
MOV DX,10D
ITERAR1_SUP:CALL HORIZONTAL ;ESTE LAZO DIBUJA 1ST LINEA
        MOV CX,05D
        INC DX 
        CMP DX,12D
        JNE ITERAR1_SUP
MOV CX,05D
MOV DI,325D
MOV DX,14D
ITERAR2_SUP:CALL HORIZONTAL ;ESTE LAZO DIBUJA 2ND LINEA
        MOV CX,05D
        INC DX 
        CMP DX,16D
        JNE ITERAR2_SUP 
MOV CX,05D
MOV DI,225D                                                                  
MOV DX,18D
ITERAR3_SUP:CALL HORIZONTAL ;ESTE LAZO DIBUJA 2ND LINEA
        MOV CX,05D
        INC DX 
        CMP DX,20D
        JNE ITERAR3_SUP
RET 


BORDE_INF:
MOV CX,425D
MOV DI,635D ;BANDERA DE COLUMNA
MOV DX,475D
ITERAR1_INF:CALL HORIZONTAL ;ESTE LAZO DIBUJA 1ST LINEA
        MOV CX,425D
        DEC DX 
        CMP DX,473D
        JNE ITERAR1_INF
MOV CX,525D
MOV DI,635D
MOV DX,471D
ITERAR2_INF:CALL HORIZONTAL ;ESTE LAZO DIBUJA 2ND LINEA
        MOV CX,525D
        DEC DX 
        CMP DX,469D
        JNE ITERAR2_INF 
RET


BORDE_DER:
MOV CX,628D
MOV DI,630D ;BANDERA DE COLUMNA
MOV DX,320D
ITERAR1_DER:CALL HORIZONTAL ;ESTE LAZO DIBUJA 1ST LINEA
        MOV CX,628D
        INC DX 
        CMP DX,480D
        JNE ITERAR1_DER
MOV CX,624D
MOV DI,626D
MOV DX,380D
ITERAR2_DER:CALL HORIZONTAL ;ESTE LAZO DIBUJA 2ND LINEA
        MOV CX,624D
        INC DX
        CMP DX,480D
        JNE ITERAR2_DER 
RET


HORIZONTAL:
MOV AH,0CH ;PINTANDO PIXEL
MOV AL,07H ;COLOR BLANCO 
MOV BH,00H ;PAGINA 0
INT 10H
INC CX     ;AVANZANDO EN LA FILA
CMP CX,DI  ;SE PINTO LA LINEA HORIZONTAL?
JNE HORIZONTAL
RET 

VERTICAL:
MOV AH,0CH ;PINTANDO PIXEL
MOV AL,07H ;COLOR BLANCO
MOV BH,00H ;PAGINA 0
INT 10H
INC DX     ;AVANZANDO EN LA COLUMNA
CMP DX,DI  ;SE PINTO LA LINEA VERTICAL?
JNE VERTICAL
RET

CABECERA:
MOV DX, OFFSET TXT_ENCABEZADO
MOV AH,09H
INT 21H
RET

MENU:
MOV DX, OFFSET TXT_OP1
CALL IMPRIMIR
MOV DX, OFFSET TXT_OP2
CALL IMPRIMIR
MOV DX, OFFSET TXT_OP3
CALL IMPRIMIR
MOV DX, OFFSET TXT_SALIR
CALL IMPRIMIR
RET 

IMPRIMIR:
MOV AH,09H
INT 21H
RET

IMPRIMIR_C:
  ;EL ATRIBUTO SE DEFINE FUERA DE LA FUNCION (BL) 
  
  MOV AH,0EH
  MOV BH,00H
  MOV CX,01H
  
  INT 10H

RET
 

VIDEO:
MOV AH,00H
MOV AL,12H ;VIDEO 640X480
INT 10H 
RET

TECLADO:
MOV AH,00H
INT 16H
RET 

INICIAR_MOUSE:
MOV AX, 0000H
INT 33H
CALL MOSTRAR_MOUSE
RET               

MOSTRAR_MOUSE:
MOV AX,0001H
INT 33H 
CALL LIMITES
RET         

LIMITES:
MOV AX,07H  ;LIMITES HORIZONTALES
MOV CX,00D
MOV DX,630D ;FIN DE LIMITES HORIZONTALES
INT 33H 
MOV AX,08H  ;LIMITES VERTICALES
MOV CX,00D
MOV DX,465D ;FIN DE LIMITES VERTICALES
INT 33H
RET
    

SALIR_AUX:
CALL TECLADO
CMP AL,1BH     ;ASCII DEL ESC
JNE SALIR_AUX
MOV AL,00H

RET

SALIR: 
MOV AX,4C00H
INT 21H


;DECLARACION DE VARIABLES UTILIZADAS EN EL PROYECTO 
;"$"= INDICA EL FINAL DE LA CADENA A IMPRIMIR
;0AH= NEW LINE 
;09H= TABULACION
;0DH= RETORNO DE CARRO

TXT_ENCABEZADO DB 0AH,09H,09H,09H,09H,09H,"   Arquitectura de Computadoras 2015",0AH,0DH,"$" 
TXT_OP1 DB  0AH,0AH,0AH,0AH,0AH,09H,09H,09H,"1. Aprendizaje",0AH,0DH,"$"
TXT_OP2 DB  0AH,0AH,0AH,09H,09H,09H,"2. Ejercicios",0AH,0DH,"$"
TXT_OP3 DB  0AH,0AH,0AH,09H,09H,09H,"3. Creditos",0AH,0DH,"$"
TXT_SALIR DB 0AH,0AH,0AH,0AH,0AH,0AH,0AH,0AH,0AH,0AH,0AH,0AH,"  Ciclo 01-2015",09H,09H,09H,09H,09H,09H,09H,"Salir (ESC)$"
TXT_CREDITOS DB 0DH,0AH,0AH,09H,09H,"CREDITOS$"
TXT_C_OPUESTO DB "  CATETO",0AH,0DH,"       OPUESTO$" 
TXT_HIPOTENUSA DB "HIPOTENUSA$"
TXT_C_ADYACENTE DB "CATETO ADYACENTE$"
TXT_SENO DB 05H," SENO$" 
TXT_COSENO DB 05H," COSENO$"
TXT_TANGENTE DB 05H," TANGENTE$"
TXT_COSECANTE DB 05H," COSECANTE$"
TXT_SECANTE DB 05H," SECANTE$"
TXT_COTANGENTE DB 05H," COTANGENTE$"
TXT_SALIR2 DB 10H,"   SALIR   ",11H,"$"
                                      
TXT_EJE1_TITULO DB "Ejercicio #1:$"
TXT_EJE1_PROB_P1 DB "Seleccione los lados del triangulo que conforman la $"
TXT_EJE1_PROB_P2 DB "siguiente funcion trigonometrica: $"


;---------------NO IMPLEMENTADAS--------------------------

BORRAR_PANTALLA_OLD: 
MOV CX,00D
MOV DI,640D
MOV DX,00D
LAZO:CALL BORRAR 
        MOV CX,00D
        INC DX 
        CMP DX,480D
        JNE LAZO
RET 

BORRAR:
MOV AH,0CH ;PINTANDO PIXEL
MOV AL,00H ;COLOR BLANCO BRILLANTE
MOV BH,00H ;PAGINA 0
INT 10H
INC CX     ;AVANZANDO EN LA FILA
CMP CX,DI  ;SE PINTO LA LINEA HORIZONTAL?
JNE BORRAR
RET

PAUSA:          ;NO HACE LA PAUSA DE 2 SEGUNDOS :'(
MOV CX,001EH
MOV DX,8480H
MOV AH,86H
INT 15H
RET
;--------------------------------------------------------
